# 🎯 VSCode 运行 C 程序 - 超简单 3 步

## 📋 步骤总览

```
第 1 步：在 VSCode 中打开项目文件夹
        ↓
第 2 步：切换到 WSL 终端
        ↓
第 3 步：运行程序
```

---

## 第 1 步：在 VSCode 中打开项目 📂

### 方法 A：使用菜单（适合初学者）

1. 打开 VSCode
2. 点击左上角 **File（文件）→ Open Folder...（打开文件夹）**
3. 在地址栏粘贴这个路径：
   ```
   \\wsl.localhost\Ubuntu-22.04\home\ccc\pq-ntor-experiment\c
   ```
4. 按回车，然后点击"选择文件夹"按钮

### 方法 B：使用命令（更快）

按 `Ctrl + J` 打开 VSCode 终端，输入：
```bash
wsl bash -c "cd ~/pq-ntor-experiment/c && code ."
```

---

## 第 2 步：切换到 WSL 终端 🐧

VSCode 打开项目后：

1. **按 `Ctrl + J` 打开终端**（如果终端已经打开就跳过这步）

2. **查看终端右上角**，应该能看到当前终端类型（比如 "bash"、"powershell" 等）

3. **点击终端类型旁边的 `˅`（下拉箭头）**

4. **选择 "Ubuntu (WSL)" 或 "Ubuntu-22.04 (WSL)"**

   现在终端提示符应该是：
   ```
   ccc@DESKTOP-xxx:~/pq-ntor-experiment/c$
   ```

---

## 第 3 步：运行程序 ▶️

在 WSL 终端中，依次输入以下命令：

### 3.1 验证环境（第一次运行建议）

```bash
make info
```

你应该看到 liboqs 库的路径：
```
liboqs lib:      /home/ccc/_oqs/lib
```

### 3.2 编译程序

```bash
make
```

你会看到：
```
Compiling src/kyber_kem.c...
Building test_kyber...
✓ Built: test_kyber
```

### 3.3 运行测试

```bash
./test_kyber
```

**成功的输出应该是：**
```
======================================================================
🧪 Testing Kyber KEM Wrapper
======================================================================

=== Kyber Parameters ===
Algorithm:     Kyber512
Public key:    800 bytes
Secret key:    1632 bytes
Ciphertext:    768 bytes
Shared secret: 32 bytes
========================

... (测试步骤) ...

======================================================================
✅ All Kyber KEM tests passed!
======================================================================
```

---

## 🚀 更简单的方法：使用 VSCode 任务

我已经为您配置好了 VSCode 任务，可以一键运行！

### 使用快捷键（最快）

1. **按 `Ctrl + Shift + B`** - 编译程序
2. **按 `Ctrl + Shift + P`**，输入 `test`，选择 **"🧪 编译并测试"**

### 使用菜单

1. 点击顶部菜单 **Terminal → Run Task...**
2. 选择以下任务之一：
   - **🧪 编译并测试 (make test)** ← 推荐：一键编译+测试
   - **▶️ 运行 test_kyber** - 只运行测试程序
   - **🔨 编译程序 (make)** - 只编译
   - **ℹ️ 显示配置信息** - 查看 liboqs 路径
   - **🧹 清理编译文件** - 删除编译生成的文件

---

## 🐛 调试模式（高级）

想要单步调试、设置断点？

1. 打开 `tests/test_kyber.c` 文件
2. 点击代码行号左侧，设置断点（出现红点 🔴）
3. **按 `F5`** 开始调试

调试控制：
- `F5` - 继续运行
- `F10` - 单步跳过（下一行）
- `F11` - 单步进入（进入函数内部）
- `Shift + F11` - 单步跳出（退出函数）

---

## ❓ 遇到问题？

### 问题 1：终端显示 "make: command not found"

**原因**：不在 WSL 终端中

**解决**：按照"第 2 步"切换到 WSL 终端

---

### 问题 2：找不到 liboqs.so

**错误信息**：
```
error while loading shared libraries: liboqs.so
```

**解决方法**：在终端中运行
```bash
export LD_LIBRARY_PATH=$HOME/_oqs/lib:$LD_LIBRARY_PATH
./test_kyber
```

---

### 问题 3：VSCode 找不到项目文件夹

**确保路径格式正确**：
- ✅ 正确：`\\wsl.localhost\Ubuntu-22.04\home\ccc\pq-ntor-experiment\c`
- ❌ 错误：`/home/ccc/pq-ntor-experiment/c`（这是 Linux 路径）

---

## 📚 相关文件

- [VSCode运行指南.md](VSCode运行指南.md) - 详细说明
- [README.md](README.md) - 项目文档
- [Makefile](Makefile) - 构建脚本

---

## 🎉 成功了！下一步做什么？

程序运行成功后，您可以：

1. ✅ 修改 `tests/test_kyber.c` 做实验
2. 📊 尝试切换到 Kyber768（修改 Makefile）
3. 💻 开始实现 PQ-Ntor 握手协议
4. 📈 编写性能测试程序

---

**祝您编码愉快！** 🚀
