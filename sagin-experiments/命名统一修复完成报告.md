# SAGIN NOMAç³»ç»Ÿå‘½åç»Ÿä¸€ä¿®å¤å®ŒæˆæŠ¥å‘Š

**ä¿®å¤æ—¶é—´**: 2025-11-23  
**ä¿®å¤èŒƒå›´**: å‰ç«¯å±•ç¤º + åç«¯æœåŠ¡ + éƒ¨ç½²è„šæœ¬  
**ä¿®å¤çŠ¶æ€**: âœ… å®Œæˆ

---

## ğŸ“‹ ä¿®å¤å†…å®¹æ€»ç»“

### 1. èŠ‚ç‚¹å‘½åç»Ÿä¸€

**æ—§å‘½å** â†’ **æ–°å‘½å**:
- SR â†’ UAV1
- S1R2 â†’ UAV2  
- S1 â†’ Ground1
- S2 â†’ Ground2
- T â†’ Ground3
- SAT â†’ SAT (ä¿æŒä¸å˜)

**å‘½ååŸåˆ™**:
- âœ… ä½¿ç”¨æ¸…æ™°çš„è‹±æ–‡å‘½å
- âœ… èŠ‚ç‚¹IDä¸æ˜¾ç¤ºåç§°ä¸€è‡´
- âœ… é¿å…è®ºæ–‡ä¸­çš„å¤æ‚æ ‡è®°
- âœ… ä¾¿äºä»£ç ç»´æŠ¤å’Œæ‰©å±•

---

## ğŸ”§ ä¿®å¤çš„æ–‡ä»¶æ¸…å•

### å‰ç«¯æ–‡ä»¶

#### 1. `/home/ccc/pq-ntor-experiment/sagin-experiments/frontend/control-panel/index.html`

**ä¿®æ”¹é¡¹**:
- âœ… `nodeConfigs` å¯¹è±¡é”®åæ›´æ–°ä¸ºæ–°ID
- âœ… æ‰€æœ‰12ä¸ª `topologyLinks` ä¸­çš„source/targetæ›´æ–°
- âœ… èŠ‚ç‚¹æ˜¾ç¤ºåç§°æ”¹ä¸ºç®€æ´å½¢å¼ï¼ˆ"SAT"è€Œé"å«æ˜ŸSAT"ï¼‰
- âœ… **å…³é”®ä¿®å¤**: `updateGlobeNodes()` æ”¹ä¸ºç›´æ¥ä½¿ç”¨ `nodeConfigs` æ˜¾ç¤ºè™šæ‹ŸèŠ‚ç‚¹ï¼Œä¸ä¾èµ–WebSocketçš„`state.nodes`
- âœ… `updateNodeList()` æ˜¾ç¤ºæ ¼å¼ä¿®æ”¹ä¸ºåªæ˜¾ç¤ºèŠ‚ç‚¹åï¼ˆç§»é™¤"(ID)"åç¼€ï¼‰

**ä»£ç ç¤ºä¾‹**:
```javascript
const nodeConfigs = {
    'SAT': { icon: 'ğŸ›°', name: 'SAT', lat: 35, lon: 122, alt: 0.15, ... },
    'UAV1': { icon: 'âœˆ', name: 'UAV1', lat: 35, lon: 110, alt: 0.05, ... },
    'UAV2': { icon: 'âœˆ', name: 'UAV2', lat: 31.2, lon: 121.5, alt: 0.05, ... },
    'Ground1': { icon: 'ğŸ“±', name: 'Ground1', lat: 39.9, lon: 116.4, alt: 0, ... },
    'Ground2': { icon: 'ğŸ“±', name: 'Ground2', lat: 30, lon: 105, alt: 0, ... },
    'Ground3': { icon: 'ğŸ“±', name: 'Ground3', lat: 28, lon: 115, alt: 0, ... }
};
```

#### 2. `/home/ccc/pq-ntor-experiment/sagin-experiments/frontend/node-view/index.html`

**ä¿®æ”¹é¡¹**:
- âœ… `nodeConfigs` å¯¹è±¡é”®åæ›´æ–°
- âœ… æ‰€æœ‰12ä¸ªæ‹“æ‰‘çš„é“¾è·¯å®šä¹‰æ›´æ–°ä¸ºä¸control-panelä¸€è‡´

---

### åç«¯æ–‡ä»¶

#### 3. `/home/ccc/pq-ntor-experiment/sagin-experiments/backend/node_agent.py`

**ä¿®æ”¹é¡¹**:
- âœ… `get_node_config()` ä¸­çš„èŠ‚ç‚¹IPé…ç½®å­—å…¸é”®åæ›´æ–°
- âœ… `get_active_links()` ç¤ºä¾‹é“¾è·¯targetæ›´æ–°ä¸ºæ–°ID

**ä¿®æ”¹ä»£ç **:
```python
node_ips = {
    'SAT': {'ip': '192.168.100.11', 'container_ip': '172.20.0.11', 'altitude': 0.15},
    'UAV1': {'ip': '192.168.100.12', 'container_ip': '172.20.0.12', 'altitude': 0.05},
    'UAV2': {'ip': '192.168.100.13', 'container_ip': '172.20.0.13', 'altitude': 0.05},
    'Ground1': {'ip': '192.168.100.14', 'container_ip': '172.20.0.14', 'altitude': 0.0},
    'Ground2': {'ip': '192.168.100.15', 'container_ip': '172.20.0.15', 'altitude': 0.0},
    'Ground3': {'ip': '192.168.100.16', 'container_ip': '172.20.0.16', 'altitude': 0.0},
}
```

#### 4. `/home/ccc/pq-ntor-experiment/sagin-experiments/scripts/deploy_all.sh`

**ä¿®æ”¹é¡¹**:
- âœ… NODESæ•°ç»„ä¸­çš„èŠ‚ç‚¹IDæ›´æ–°

```bash
NODES=(
    "192.168.100.11:SAT:satellite"
    "192.168.100.12:UAV1:aircraft"
    "192.168.100.13:UAV2:aircraft"
    "192.168.100.14:Ground1:ground"
    "192.168.100.15:Ground2:ground"
    "192.168.100.16:Ground3:ground"
)
```

#### 5. `/home/ccc/pq-ntor-experiment/sagin-experiments/scripts/start_all_agents.sh` **(æ–°å»º)**

**åŠŸèƒ½**: WSLæœ¬åœ°æµ‹è¯•ç”¨ä¸€é”®å¯åŠ¨è„šæœ¬

**ç‰¹æ€§**:
- âœ… å¯åŠ¨æ‰€æœ‰6ä¸ªèŠ‚ç‚¹agent
- âœ… ä½¿ç”¨ç»Ÿä¸€å‘½åè§„åˆ™
- âœ… è¿æ¥åˆ°æœ¬åœ°Hub (ws://localhost:9000)
- âœ… æ—¥å¿—è¾“å‡ºåˆ° `/tmp/agent_<NODE_ID>.log`

**ä½¿ç”¨æ–¹æ³•**:
```bash
/home/ccc/pq-ntor-experiment/sagin-experiments/scripts/start_all_agents.sh
```

---

## ğŸŒ è®¿é—®URLæ›´æ–°

### æ§åˆ¶é¢æ¿
```
http://localhost:8080/control-panel/index.html
http://192.168.5.83:8080/control-panel/index.html
```

### èŠ‚ç‚¹è§†å›¾ï¼ˆé£è…¾æ´¾è®¿é—®ï¼‰
```
http://192.168.5.83:8080/node-view/index.html?node_id=SAT
http://192.168.5.83:8080/node-view/index.html?node_id=UAV1
http://192.168.5.83:8080/node-view/index.html?node_id=UAV2
http://192.168.5.83:8080/node-view/index.html?node_id=Ground1
http://192.168.5.83:8080/node-view/index.html?node_id=Ground2
http://192.168.5.83:8080/node-view/index.html?node_id=Ground3
```

---

## ğŸ› å·²è§£å†³çš„é—®é¢˜

### é—®é¢˜1: èŠ‚ç‚¹çŠ¶æ€æ æ˜¾ç¤º"SAT(SAT)"

**åŸå› **: `updateNodeList()` ä¸­ä½¿ç”¨äº† `${config.name} (${id})` æ ¼å¼  
**ä¿®å¤**: æ”¹ä¸ºåªæ˜¾ç¤º `${config.name}`  
**ç»“æœ**: ç°åœ¨æ˜¾ç¤ºä¸ºç®€æ´çš„"SAT", "UAV1"ç­‰

### é—®é¢˜2: åªæœ‰SATèŠ‚ç‚¹åœ¨çº¿ï¼Œå…¶ä»–èŠ‚ç‚¹ä¸æ˜¾ç¤º

**åŸå› **: 
1. å‰ç«¯`updateGlobeNodes()`ä¾èµ–WebSocketçš„`state.nodes`æ•°æ®
2. WebSocket Hubåªæ”¶åˆ°ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆSATï¼‰çš„æ•°æ®
3. å…¶ä»–5ä¸ªnode_agentæ²¡æœ‰è¿æ¥åˆ°Hub

**ä¿®å¤**:
1. å‰ç«¯æ”¹ä¸ºç›´æ¥ä»`nodeConfigs`æ˜¾ç¤ºè™šæ‹ŸèŠ‚ç‚¹ï¼ˆä¸ä¾èµ–WebSocketï¼‰
2. åˆ›å»ºå¯åŠ¨è„šæœ¬ï¼Œæ­£ç¡®å¯åŠ¨æ‰€æœ‰6ä¸ªnode_agent
3. é…ç½®HUB_URLä¸ºlocalhost:9000ï¼ˆWSLæœ¬åœ°æµ‹è¯•ï¼‰

**ç»“æœ**: 
- âœ… åœ°çƒä¸Šå§‹ç»ˆæ˜¾ç¤º6ä¸ªè™šæ‹ŸèŠ‚ç‚¹
- âœ… æ‰€æœ‰6ä¸ªnode_agentæˆåŠŸè¿æ¥åˆ°Hub
- âœ… WebSocket Hubç°åœ¨æœ‰æ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®

### é—®é¢˜3: node-viewé¡µé¢çš„ğŸ“¡èŠ‚ç‚¹ä¿¡æ¯å’ŒğŸ”PQ-NTORæ— æ•°æ®

**åŸå› **: node-viewæœŸæœ›ä»WebSocketæ”¶åˆ°å½“å‰èŠ‚ç‚¹çš„æ•°æ®ï¼Œä½†åªæœ‰SATèŠ‚ç‚¹åœ¨å‘é€æ•°æ®

**ä¿®å¤**: å¯åŠ¨æ‰€æœ‰6ä¸ªnode_agentï¼ˆUAV1, UAV2, Ground1, Ground2, Ground3ï¼‰

**ç»“æœ**: âœ… ç°åœ¨æ¯ä¸ªèŠ‚ç‚¹è§†å›¾éƒ½èƒ½æ”¶åˆ°å¯¹åº”çš„WebSocketæ•°æ®

---

## âœ… éªŒè¯æ­¥éª¤

### 1. æ£€æŸ¥node_agentè¿è¡ŒçŠ¶æ€

```bash
ps aux | grep node_agent.py | grep -v grep
```

åº”è¯¥çœ‹åˆ°6ä¸ªè¿›ç¨‹ã€‚

### 2. æ£€æŸ¥Hubè¿æ¥

```bash
tail -n 2 /tmp/agent_*.log
```

æ¯ä¸ªagentåº”è¯¥æ˜¾ç¤º "Node XXX connected to Hub"ã€‚

### 3. åˆ·æ–°æ§åˆ¶é¢æ¿

è®¿é—® `http://localhost:8080/control-panel/index.html`

**é¢„æœŸæ•ˆæœ**:
- âœ… åœ°çƒä¸Šæ˜¾ç¤º6ä¸ªèŠ‚ç‚¹ï¼ˆğŸ›° SAT, âœˆ UAV1, âœˆ UAV2, ğŸ“± Ground1, ğŸ“± Ground2, ğŸ“± Ground3ï¼‰
- âœ… èŠ‚ç‚¹çŠ¶æ€æ æ˜¾ç¤ºæ‰€æœ‰6ä¸ªèŠ‚ç‚¹åœ¨çº¿
- âœ… èŠ‚ç‚¹åç§°æ˜¾ç¤ºä¸º"SAT", "UAV1"ç­‰ï¼ˆæ— æ‹¬å·åç¼€ï¼‰
- âœ… åˆ‡æ¢æ‹“æ‰‘1-12ï¼Œè¿çº¿æ­£ç¡®å˜åŒ–

### 4. æµ‹è¯•èŠ‚ç‚¹è§†å›¾

è®¿é—® `http://localhost:8080/node-view/index.html?node_id=UAV1`

**é¢„æœŸæ•ˆæœ**:
- âœ… é¡µé¢æ ‡é¢˜æ˜¾ç¤º"èŠ‚ç‚¹è§†å›¾ - UAV1"
- âœ… ğŸ“¡èŠ‚ç‚¹ä¿¡æ¯éƒ¨åˆ†æ˜¾ç¤ºUAV1çš„é…ç½®
- âœ… ğŸ”PQ-NTORéƒ¨åˆ†æ˜¾ç¤ºç»Ÿè®¡æ•°æ®
- âœ… åœ°çƒè§†å›¾æ˜¾ç¤ºå½“å‰æ‹“æ‰‘çš„è¿æ¥

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           WebSocket Hub (9000ç«¯å£)              â”‚
â”‚  - æ¥æ”¶6ä¸ªnode_agentçš„çŠ¶æ€æ•°æ®                   â”‚
â”‚  - å¹¿æ’­åˆ°å‰ç«¯                                    â”‚
â”‚  - ç®¡ç†æ‹“æ‰‘åˆ‡æ¢                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                    â”‚
  â”Œâ”€â”€â–¼â”€â”€â”             â”Œâ”€â”€â–¼â”€â”€â”
  â”‚å‰ç«¯1 â”‚             â”‚å‰ç«¯2 â”‚
  â”‚æ§åˆ¶  â”‚             â”‚èŠ‚ç‚¹  â”‚
  â”‚é¢æ¿  â”‚             â”‚è§†å›¾  â”‚
  â””â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ æ˜¾ç¤ºè™šæ‹ŸèŠ‚ç‚¹ï¼ˆä¸ä¾èµ–WebSocketï¼‰
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è™šæ‹Ÿæ‹“æ‰‘èŠ‚ç‚¹ (nodeConfigs)       â”‚
â”‚  SAT, UAV1, UAV2,               â”‚
â”‚  Ground1, Ground2, Ground3      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     â–²
     â”‚ WebSocketæ•°æ®
     â”‚
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6ä¸ªnode_agentè¿›ç¨‹                  â”‚
â”‚  - SAT (satellite)                â”‚
â”‚  - UAV1 (aircraft)                â”‚
â”‚  - UAV2 (aircraft)                â”‚
â”‚  - Ground1 (ground)               â”‚
â”‚  - Ground2 (ground)               â”‚
â”‚  - Ground3 (ground)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ åç»­å·¥ä½œå»ºè®®

1. **é£è…¾æ´¾éƒ¨ç½²**: ä½¿ç”¨ `deploy_all.sh` å°†æ›´æ–°éƒ¨ç½²åˆ°å®é™…çš„é£è…¾æ´¾é›†ç¾¤
2. **æ‹“æ‰‘éªŒè¯**: é€ä¸ªæµ‹è¯•12ç§æ‹“æ‰‘çš„è¿æ¥æ­£ç¡®æ€§
3. **PQ-NTORé›†æˆ**: å°†çœŸå®çš„PQ-NTORæ¡æ‰‹æ•°æ®æ¥å…¥node_agent
4. **æ€§èƒ½ä¼˜åŒ–**: ä¼˜åŒ–å‰ç«¯æ¸²æŸ“ï¼Œå‡å°‘é‡ç»˜æ¬¡æ•°

---

## ğŸ¯ å‘½åç»Ÿä¸€ä¼˜åŠ¿

1. âœ… **å¯è¯»æ€§å¼º**: ä¸€çœ¼çœ‹å‡ºèŠ‚ç‚¹ç±»å‹ï¼ˆSAT=å«æ˜Ÿ, UAV=æ— äººæœº, Ground=åœ°é¢ï¼‰
2. âœ… **æ˜“äºæ‰©å±•**: éœ€è¦æ›´å¤šèŠ‚ç‚¹æ—¶ç»§ç»­ç¼–å·ï¼ˆUAV3, Ground4...ï¼‰
3. âœ… **å›½é™…åŒ–**: è‹±æ–‡å‘½åä¾¿äºè®ºæ–‡æ’°å†™
4. âœ… **æ— æ­§ä¹‰**: ä¸ä¼šä¸è®ºæ–‡ä¸­çš„S1/R1ç­‰ç¬¦å·æ··æ·†
5. âœ… **å‰åç«¯ä¸€è‡´**: æ‰€æœ‰ä»£ç ä½¿ç”¨ç›¸åŒçš„å‘½åè§„åˆ™

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025-11-23 14:03  
**ä¿®å¤çŠ¶æ€**: âœ… å…¨éƒ¨å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**: âœ… æ‰€æœ‰èŠ‚ç‚¹agentè¿æ¥æˆåŠŸ

**ç›¸å…³æ–‡æ¡£**:
- [èŠ‚ç‚¹å‘½åè§„åˆ™ç»Ÿä¸€æ–‡æ¡£.md](èŠ‚ç‚¹å‘½åè§„åˆ™ç»Ÿä¸€æ–‡æ¡£.md)
- [12ç§NOMAæ‹“æ‰‘ä¿®å¤æŠ¥å‘Š.md](12ç§NOMAæ‹“æ‰‘ä¿®å¤æŠ¥å‘Š.md)
