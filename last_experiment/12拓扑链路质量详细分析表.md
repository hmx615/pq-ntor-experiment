# 12拓扑链路质量详细分析表

**生成时间**: 2025-11-28
**数据来源**: 师妹物理模型计算
**目的**: 详细展示每个拓扑的链路质量参数

---

## 📊 总览表格

| 拓扑ID | 名称 | 模式 | 端到端速率 | 端到端延迟 | 端到端SINR | 丢包率 | 跳数 | 瓶颈链路 |
|--------|------|------|-----------|-----------|-----------|--------|------|---------|
| **topo01** | Z1 Up - 直连NOMA | NOMA | 18.70 Mbps | 5.48 ms | -0.40 dB | 3.00% | 2 | sat→user_edge |
| **topo02** | Z1 Up - 双路径 | Hybrid | 27.52 Mbps | 5.49 ms | 2.26 dB | 2.00% | 3 | user_relay→uav |
| **topo03** | Z3 Up - 双终端中继 | Multi-hop | 26.69 Mbps | 2.75 ms | 23.24 dB | 0.10% | 3 | user→uav ×2 |
| **topo04** | Z4 Up - 混合直连+协作 | Hybrid | 27.52 Mbps | 5.49 ms | 3.98 dB | 2.00% | 3 | user_weak→uav |
| **topo05** | Z5 Up - 多层树形 | Tree | 26.69 Mbps | 2.75 ms | 23.60 dB | 0.10% | 3 | user→uav ×2 |
| **topo06** | Z6 Up - 双中继 | Multi-hop | 1.82 Mbps | 2.75 ms | -0.56 dB | 3.00% | 3 | user→user (D2D) |
| **topo07** | Z1 Down - NOMA+协作 | Hybrid | 26.69 Mbps | 5.49 ms | 3.09 dB | 2.00% | 3 | uav→user_relay |
| **topo08** | Z2 Down - 多跳下行 | Multi-hop | 23.40 Mbps | 2.75 ms | 21.64 dB | 0.10% | 2 | uav→user_far |
| **topo09** | Z3 Down - 协作下行 | Cooperative | 0.30 Mbps | 2.75 ms | -9.59 dB | 5.00% | 3 | user→user (D2D) |
| **topo10** | Z4 Down - 混合下行 | Hybrid | 26.69 Mbps | 5.49 ms | 3.21 dB | 2.00% | 3 | uav→user_far |
| **topo11** | Z5 Down - 多跳协作 | Multi-hop | 1.82 Mbps | 2.75 ms | -0.56 dB | 3.00% | 3 | user→user (D2D) |
| **topo12** | Z6 Down - 双路径 | Dual-path | 10.00 Mbps | 5.50 ms | 1.29 dB | 2.00% | 4 | ground_relay→user |

---

## 🔬 分拓扑详细分析

### TOPO01: Z1 Up - 直连NOMA

**拓扑描述**: 卫星直连两个地面用户（中心+边缘）

**端到端参数**:
- 速率: 18.70 Mbps
- 延迟: 5.48 ms
- SINR: -0.40 dB
- 丢包率: 3.00%

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 距离 | 说明 |
|------|------|------|------------|----------|----------|------|------|
| 1 | sat → user_center | 卫星 | **35.06** | 2.74 | **3.75** | ~813 km | 中心用户，信道好 |
| 2 | sat → user_edge | 卫星 | **18.70** ⚠️ | 2.74 | **-0.40** ⚠️ | ~813 km | 边缘用户，**瓶颈** |

**关键观察**:
- ⚠️ **NOMA瓶颈**: 边缘用户速率仅为中心用户的53%
- ⚠️ **负SINR**: 边缘用户SINR为-0.40dB，接近通信极限
- 💡 **波束边缘效应**: 用户距波束中心15km，波束增益下降明显

---

### TOPO02: Z1 Up - 双路径

**拓扑描述**: 用户通过不同路径上行到卫星

**端到端参数**:
- 速率: 27.52 Mbps
- 延迟: 5.49 ms
- SINR: 2.26 dB
- 丢包率: 2.00%

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 说明 |
|------|------|------|------------|----------|----------|------|
| 1 | user_direct → sat | 卫星 | 28.45 | 2.74 | 2.26 | 路径1: 直连卫星 |
| 2 | user_relay → uav | UAV | **27.52** ⚠️ | 0.01 | 41.42 | 路径2: 通过UAV，**瓶颈** |
| 3 | uav → sat | 卫星 | **159.43** ⭐ | 2.74 | 23.98 | UAV高增益天线 |

**关键观察**:
- ⭐ **UAV优势**: UAV→卫星速率达159 Mbps（UAV天线增益25dB）
- ⚠️ **UAV瓶颈**: 地面用户→UAV是瓶颈（27.52 Mbps）
- 💡 **双路径**: 可以通过直连或UAV中继，两条路径速率相近

---

### TOPO03: Z3 Up - 双终端中继

**拓扑描述**: 两个地面用户通过UAV中继到卫星

**端到端参数**:
- 速率: 26.69 Mbps
- 延迟: 2.75 ms ⭐
- SINR: 23.24 dB ⭐
- 丢包率: 0.10% ⭐

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 说明 |
|------|------|------|------------|----------|----------|------|
| 1 | user1 → uav | UAV | **26.69** ⚠️ | 0.01 | 40.17 | 用户1上行，**瓶颈** |
| 2 | user2 → uav | UAV | **26.69** ⚠️ | 0.01 | 40.17 | 用户2上行，**瓶颈** |
| 3 | uav → sat | 卫星 | **154.52** ⭐ | 2.74 | 23.24 | UAV→卫星，高速 |

**关键观察**:
- ⭐ **最佳SINR**: 23.24 dB，链路质量优秀
- ⭐ **低延迟**: 仅2.75 ms（无卫星→地面直连）
- ⭐ **低丢包**: 0.10%，几乎无丢包
- 💡 **UAV聚合**: 两个用户通过UAV聚合后上行

---

### TOPO04: Z4 Up - 混合直连+协作

**拓扑描述**: 一个用户直连卫星，另一个通过UAV协作

**端到端参数**:
- 速率: 27.52 Mbps
- 延迟: 5.49 ms
- SINR: 3.98 dB
- 丢包率: 2.00%

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 说明 |
|------|------|------|------------|----------|----------|------|
| 1 | user_strong → sat | 卫星 | 36.17 | 2.74 | 3.98 | 强用户直连 |
| 2 | user_weak → uav | UAV | **27.52** ⚠️ | 0.01 | 41.42 | 弱用户通过UAV，**瓶颈** |
| 3 | uav → sat | 卫星 | **153.42** ⭐ | 2.74 | 23.07 | UAV→卫星 |

**关键观察**:
- 💡 **混合策略**: 强用户直连，弱用户通过UAV
- ⚠️ **UAV瓶颈**: 弱用户上行受限于地面→UAV链路

---

### TOPO05: Z5 Up - 多层树形

**拓扑描述**: 多个用户通过UAV层级中继

**端到端参数**:
- 速率: 26.69 Mbps
- 延迟: 2.75 ms ⭐
- SINR: 23.60 dB ⭐
- 丢包率: 0.10% ⭐

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 说明 |
|------|------|------|------------|----------|----------|------|
| 1 | user1 → uav1 | UAV | **26.69** ⚠️ | 0.01 | 40.17 | 用户1，**瓶颈** |
| 2 | user2 → uav1 | UAV | **26.69** ⚠️ | 0.01 | 40.17 | 用户2，**瓶颈** |
| 3 | uav1 → sat | 卫星 | **156.91** ⭐ | 2.74 | 23.60 | UAV聚合上行 |

**关键观察**:
- ⭐ **最佳SINR**: 23.60 dB
- ⭐ **低延迟**: 2.75 ms
- 💡 **树形结构**: UAV作为聚合节点

---

### TOPO06: Z6 Up - 无人机+终端双中继 ⚠️⚠️

**拓扑描述**: 用户通过UAV和另一用户双中继到卫星

**端到端参数**:
- 速率: **1.82 Mbps** ⚠️⚠️
- 延迟: 2.75 ms
- SINR: **-0.56 dB** ⚠️⚠️
- 丢包率: 3.00%

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 距离 | 说明 |
|------|------|------|------------|----------|----------|------|------|
| 1 | user_source → user_relay | **D2D** | **1.82** ⚠️⚠️ | 0.00 | **-0.56** ⚠️⚠️ | ~1.4 km | **严重瓶颈** |
| 2 | user_relay → uav | UAV | 26.69 | 0.01 | 40.17 | - | 正常 |
| 3 | uav → sat | 卫星 | 154.23 | 2.74 | 23.19 | - | 正常 |

**关键观察**:
- ⚠️⚠️ **D2D瓶颈**: 用户间D2D链路仅1.82 Mbps
- ⚠️⚠️ **低功率**: D2D功率仅0.2W，距离1.4km时严重衰减
- ⚠️⚠️ **负SINR**: -0.56 dB，接近通信极限
- 💡 **优化方向**: 缩短D2D距离到500m以内

---

### TOPO07: Z1 Down - 直连NOMA+协作

**拓扑描述**: 卫星下行到两个用户，一个直连一个通过UAV

**端到端参数**:
- 速率: 26.69 Mbps
- 延迟: 5.49 ms
- SINR: 3.09 dB
- 丢包率: 2.00%

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 说明 |
|------|------|------|------------|----------|----------|------|
| 1 | sat → user_direct | 卫星 | 32.05 | 2.74 | 3.09 | 直连用户 |
| 2 | sat → uav | 卫星 | 149.31 | 2.74 | 22.45 | 卫星→UAV |
| 3 | uav → user_relay | UAV | **26.69** ⚠️ | 0.01 | 40.17 | **瓶颈** |

**关键观察**:
- 💡 **下行NOMA**: 卫星同时服务直连和中继用户
- ⚠️ **UAV下行瓶颈**: UAV→地面用户是瓶颈

---

### TOPO08: Z2 Down - 多跳协作下行

**拓扑描述**: 卫星通过UAV多跳到达远端用户

**端到端参数**:
- 速率: 23.40 Mbps
- 延迟: 2.75 ms
- SINR: 21.64 dB ⭐
- 丢包率: 0.10% ⭐

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 说明 |
|------|------|------|------------|----------|----------|------|
| 1 | sat → uav | 卫星 | 143.97 | 2.74 | 21.64 | 卫星→UAV |
| 2 | uav → user_far | UAV | **23.40** ⚠️ | 0.01 | 35.22 | 远端用户，**瓶颈** |

**关键观察**:
- ⭐ **高SINR**: 21.64 dB，链路质量好
- 💡 **远端覆盖**: UAV扩展卫星覆盖范围
- ⚠️ **UAV限制**: 受UAV→地面带宽限制

---

### TOPO09: Z3 Down - T用户协作下行 ⚠️⚠️⚠️

**拓扑描述**: 卫星下行到地面用户，通过其他用户协作

**端到端参数**:
- 速率: **0.30 Mbps** ⚠️⚠️⚠️
- 延迟: 2.75 ms
- SINR: **-9.59 dB** ⚠️⚠️⚠️
- 丢包率: **5.00%** ⚠️⚠️⚠️

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 距离 | 说明 |
|------|------|------|------------|----------|----------|------|------|
| 1 | sat → uav | 卫星 | 151.57 | 2.74 | 22.79 | - | 正常 |
| 2 | uav → user_helper | UAV | 26.69 | 0.01 | 40.17 | - | 正常 |
| 3 | user_helper → user_target | **D2D** | **0.30** ⚠️⚠️⚠️ | 0.01 | **-9.59** ⚠️⚠️⚠️ | **~2.8 km** | **极限瓶颈** |

**关键观察**:
- ⚠️⚠️⚠️ **极低速率**: 仅0.30 Mbps，几乎不可用
- ⚠️⚠️⚠️ **极差SINR**: -9.59 dB，远低于通信门限
- ⚠️⚠️⚠️ **D2D超距**: 用户间距离2.8km，功率0.2W完全不足
- 🔧 **必须优化**: 缩短user_helper到user_target距离到1km以内

---

### TOPO10: Z4 Down - 混合直连+单跳协作

**拓扑描述**: 一个用户直连，另一个通过UAV单跳

**端到端参数**:
- 速率: 26.69 Mbps
- 延迟: 5.49 ms
- SINR: 3.21 dB
- 丢包率: 2.00%

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 说明 |
|------|------|------|------------|----------|----------|------|
| 1 | sat → user_near | 卫星 | 32.60 | 2.74 | 3.21 | 近端直连 |
| 2 | sat → uav | 卫星 | 146.97 | 2.74 | 22.09 | 卫星→UAV |
| 3 | uav → user_far | UAV | **26.69** ⚠️ | 0.01 | 40.17 | 远端中继，**瓶颈** |

**关键观察**:
- 💡 **混合下行**: 近端直连，远端通过UAV
- ⚠️ **UAV瓶颈**: UAV下行带宽限制

---

### TOPO11: Z5 Down - 混合多跳协作 ⚠️⚠️

**拓扑描述**: 卫星通过UAV和地面用户多级中继

**端到端参数**:
- 速率: **1.82 Mbps** ⚠️⚠️
- 延迟: 2.75 ms
- SINR: **-0.56 dB** ⚠️⚠️
- 丢包率: 3.00%

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 距离 | 说明 |
|------|------|------|------------|----------|----------|------|------|
| 1 | sat → uav | 卫星 | 148.06 | 2.74 | 22.26 | - | 正常 |
| 2 | uav → user_relay | UAV | 26.69 | 0.01 | 40.17 | - | 正常 |
| 3 | user_relay → user_final | **D2D** | **1.82** ⚠️⚠️ | 0.00 | **-0.56** ⚠️⚠️ | ~1.4 km | **严重瓶颈** |

**关键观察**:
- ⚠️⚠️ **D2D瓶颈**: 最后一跳D2D仅1.82 Mbps
- ⚠️⚠️ **负SINR**: -0.56 dB
- 🔧 **优化方向**: 缩短D2D距离

---

### TOPO12: Z6 Down - 双中继协作下行

**拓扑描述**: 卫星通过UAV和地面站双路径到达用户

**端到端参数**:
- 速率: 10.00 Mbps
- 延迟: 5.50 ms
- SINR: 1.29 dB
- 丢包率: 2.00%

**链路详情**:

| 序号 | 链路 | 类型 | 速率 (Mbps) | 延迟 (ms) | SINR (dB) | 说明 |
|------|------|------|------------|----------|----------|------|
| 1 | sat → uav | 卫星 | 142.90 | 2.74 | 21.48 | 路径1: UAV |
| 2 | sat → ground_relay | 卫星 | 24.60 | 2.74 | 1.29 | 路径2: 地面站 |
| 3 | uav → user | UAV | 24.67 | 0.01 | 37.13 | UAV下行 |
| 4 | ground_relay → user | Unknown | **10.00** ⚠️ | 0.01 | 20.00 | **瓶颈**(未识别类型) |

**关键观察**:
- 💡 **双路径冗余**: UAV和地面站双路径
- ⚠️ **地面中继瓶颈**: 地面站→用户链路限制（未正确识别类型）
- 🔧 **需修复**: ground_relay→user链路类型识别错误

---

## 🎯 关键发现总结

### 1. 链路类型特征

**卫星链路** (20 GHz, 20 MHz):
- 速率范围: 18.70 - 159.43 Mbps
- 特点:
  - ⭐ 卫星→UAV最快 (140-160 Mbps，UAV高增益天线)
  - ⚠️ 卫星→地面用户 (18-36 Mbps，受波束位置影响)
- 延迟: 固定2.74 ms (传播延迟)

**UAV链路** (2.4 GHz, 2 MHz):
- 速率范围: 23.40 - 27.52 Mbps
- 特点:
  - 速率稳定在 26-27 Mbps
  - SINR优秀 (35-41 dB)
  - 延迟极低 (0.01 ms)

**D2D链路** (2.4 GHz, 2 MHz):
- 速率范围: **0.30 - 1.82 Mbps** ⚠️⚠️
- 特点:
  - ⚠️⚠️ 功率低 (0.2W)，远距离严重衰减
  - ⚠️⚠️ SINR极差 (-9.59 ~ -0.56 dB)
  - 📍 **距离敏感**:
    - 500m: ~5 Mbps
    - 1km: ~2 Mbps
    - 2.8km: ~0.3 Mbps

### 2. 瓶颈链路统计

| 瓶颈类型 | 拓扑数量 | 拓扑ID | 原因 |
|---------|---------|--------|------|
| **D2D链路** | 3 | topo06, 09, 11 | 功率低+距离远 |
| **UAV下行** | 5 | topo02, 03, 04, 05, 07, 10 | UAV带宽限制 (2 MHz) |
| **卫星链路** | 3 | topo01, 08, 12 | 波束边缘/NOMA |

### 3. 优秀拓扑 (速率>25 Mbps, SINR>20 dB, 丢包<1%)

| 拓扑ID | 速率 | SINR | 丢包 | 优势 |
|--------|------|------|------|------|
| **topo03** | 26.69 Mbps | 23.24 dB | 0.10% | UAV聚合，低延迟 |
| **topo05** | 26.69 Mbps | 23.60 dB | 0.10% | 树形结构，高SINR |
| **topo08** | 23.40 Mbps | 21.64 dB | 0.10% | 多跳下行，稳定 |

### 4. 问题拓扑 (速率<5 Mbps 或 SINR<0 dB)

| 拓扑ID | 速率 | SINR | 问题 | 建议 |
|--------|------|------|------|------|
| **topo09** | **0.30 Mbps** | **-9.59 dB** | D2D距离2.8km | 缩短到1km |
| **topo06** | 1.82 Mbps | -0.56 dB | D2D距离1.4km | 缩短到500m |
| **topo11** | 1.82 Mbps | -0.56 dB | D2D距离1.4km | 缩短到500m |

---

## 📈 对PQ-NTOR实验的影响

### 速率维度

**良好覆盖** (12个测试点):
```
超低速  低速    中低速  中速    中高速  高速
0.3     1.8     10      18      23      26-27 Mbps
↓       ↓       ↓       ↓       ↓       ↓
topo09  06,11   12      01      08      02-05,07,10
```

**预期握手时间**:
- 0.3 Mbps: ~10-20 ms (消息传输慢)
- 1.8 Mbps: ~5-8 ms
- 10 Mbps: ~2-3 ms
- 18-27 Mbps: ~1-2 ms

### 丢包维度

| 丢包率 | 拓扑数量 | 拓扑ID | SINR范围 |
|--------|---------|--------|---------|
| 0.10% | 3 | topo03, 05, 08 | >20 dB |
| 2.00% | 6 | topo02, 04, 07, 10, 12 | 1-4 dB |
| 3.00% | 3 | topo01, 06, 11 | -1 dB |
| 5.00% | 1 | topo09 | -10 dB |

---

## 🔧 优化建议

### 立即优化（针对问题拓扑）

**topo09**:
```python
# 当前
user_helper = np.array([5000.0, 5000.0, 0.0])
user_target = np.array([7000.0, 7000.0, 0.0])  # 距离2.8km ⚠️

# 优化后
user_helper = np.array([5000.0, 5000.0, 0.0])
user_target = np.array([5700.0, 5700.0, 0.0])  # 距离1km ✅
# 预期速率: 0.30 → ~2-3 Mbps
```

**topo06, topo11**: 类似调整，D2D距离缩短到500-800m

### 可选优化（提升整体质量）

**增加D2D功率**:
```python
# 当前: 0.2W (23 dBm)
# 可调整为: 0.5W (27 dBm) 或 1.0W (30 dBm)
```

**增加UAV带宽**:
```python
# 当前: 2 MHz
# 可调整为: 5 MHz 或 10 MHz
# 预期: UAV链路速率提升2.5-5倍
```

---

## ✅ 总结

1. ✅ **12拓扑参数完整**: 所有链路参数已计算
2. ✅ **覆盖范围广泛**: 速率0.3-27 Mbps，丢包0.1-5%
3. ⚠️ **3个问题拓扑**: topo06, 09, 11需要优化
4. ⭐ **3个优秀拓扑**: topo03, 05, 08可作为性能基准
5. 💡 **瓶颈清晰**: D2D链路是主要瓶颈

**下一步行动**:
1. 决定是否优化topo06, 09, 11
2. 编写PQ-NTOR自动化测试脚本
3. 运行实验，绘制性能曲线

---

**文档版本**: v1.0
**创建时间**: 2025-11-28
**状态**: 等待优化决策
