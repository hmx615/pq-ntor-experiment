# 12拓扑真实网络参数计算结果

**计算时间**: 2025-11-28
**方法**: 基于师妹提供的物理层模型
**状态**: ✅ 完成

---

## 📊 参数范围总览

### 通信速率 (Communication Rate)
- **范围**: 0.30 - 27.52 Mbps
- **中位数**: ~23.40 Mbps
- **特点**: 大部分拓扑在20-27 Mbps范围内

### 传播延迟 (Propagation Delay)
- **范围**: 2.75 - 5.50 ms
- **分布**: 两组明显分组
  - 低延迟组 (2.75 ms): 主要是UAV和D2D链路
  - 高延迟组 (5.48-5.50 ms): 包含卫星链路

### 丢包率 (Packet Loss)
- **范围**: 0.10 - 5.00 %
- **分布**: 基于SINR推算
  - 优秀 (0.1%): 高SINR拓扑
  - 良好 (2.0%): 中等SINR拓扑
  - 较差 (3.0-5.0%): 低SINR拓扑

---

## 📋 12拓扑详细参数

| 拓扑ID | 名称 | 速率(Mbps) | 延迟(ms) | 丢包(%) | SINR(dB) | 跳数 |
|--------|------|-----------|---------|---------|---------|------|
| **topo01** | Z1 Up - 直连NOMA | 18.70 | 5.48 | 3.00 | -0.40 | 2 |
| **topo02** | Z1 Up - 双路径 | 27.52 | 5.49 | 2.00 | 2.26 | 3 |
| **topo03** | Z3 Up - 双终端中继 | 26.69 | 2.75 | 0.10 | 23.24 | 3 |
| **topo04** | Z4 Up - 混合直连+协作 | 27.52 | 5.49 | 2.00 | 3.98 | 3 |
| **topo05** | Z5 Up - 多层树形 | 26.69 | 2.75 | 0.10 | 23.60 | 3 |
| **topo06** | Z6 Up - 无人机+终端双中继 | 1.82 | 2.75 | 3.00 | -0.56 | 3 |
| **topo07** | Z1 Down - 直连NOMA+协作 | 26.69 | 5.49 | 2.00 | 3.09 | 3 |
| **topo08** | Z2 Down - 多跳协作下行 | 23.40 | 2.75 | 0.10 | 21.64 | 2 |
| **topo09** | Z3 Down - T用户协作下行 | 0.30 | 2.75 | 5.00 | -9.59 | 3 |
| **topo10** | Z4 Down - 混合直连+单跳协作 | 26.69 | 5.49 | 2.00 | 3.21 | 3 |
| **topo11** | Z5 Down - 混合多跳协作 | 1.82 | 2.75 | 3.00 | -0.56 | 3 |
| **topo12** | Z6 Down - 双中继协作下行 | 10.00 | 5.50 | 2.00 | 1.29 | 4 |

---

## 🔍 关键发现

### 1. 速率分布的两极分化

**高速率拓扑** (>20 Mbps):
- topo02, 03, 04, 05, 07, 08, 10
- 共同特征: 包含UAV中继或直连卫星链路，SINR较好

**低速率拓扑** (<5 Mbps):
- topo06, 09, 11
- 共同特征: 包含D2D链路或信道条件极差

**原因分析**:
- D2D链路功率低 (0.2W)，远距离时速率显著下降
- topo09的D2D距离达到2.8km，SINR仅-9.59dB

### 2. 延迟的双峰分布

**低延迟组** (2.75 ms):
- topo03, 05, 06, 08, 09, 11
- 特征: 不包含卫星→地面的长距离链路

**高延迟组** (5.48-5.50 ms):
- topo01, 02, 04, 07, 10, 12
- 特征: 包含卫星→地面链路（~813km距离，2.7ms传播延迟）

### 3. 丢包率与SINR强相关

| SINR范围 | 丢包率 | 拓扑示例 |
|---------|--------|---------|
| > 20 dB | 0.1% | topo03, 05, 08 |
| 10-20 dB | 0.5% | - |
| 0-10 dB | 1-2% | topo02, 04, 07, 10, 12 |
| -5-0 dB | 3% | topo01, 06, 11 |
| < -5 dB | 5% | topo09 |

---

## 🎯 对PQ-NTOR实验的意义

### 速率维度分析

**绘制曲线**: 握手时间 vs 通信速率

**预期趋势**:
```
低速率 (0.3-2 Mbps)  → 握手时间长 (消息传输慢)
中速率 (18-23 Mbps)  → 握手时间中等
高速率 (26-27 Mbps)  → 握手时间短
```

**覆盖的速率点** (12个):
- 超低: 0.30 Mbps (topo09)
- 低速: 1.82 Mbps (topo06, 11)
- 中低: 10.00 Mbps (topo12)
- 中速: 18.70 Mbps (topo01)
- 中高: 23.40 Mbps (topo08)
- 高速: 26.69-27.52 Mbps (topo02, 03, 04, 05, 07, 10)

**优势**: 速率分布广泛，从0.3到27 Mbps，跨越近100倍

### 丢包维度分析

**绘制曲线**: 握手时间 vs 丢包率

**预期趋势**:
```
低丢包 (0.1%)  → 握手时间短 (无重传)
中丢包 (2%)    → 握手时间轻微增加
高丢包 (5%)    → 握手时间显著增加 (重传多)
```

**覆盖的丢包点** (12个):
- 极低: 0.1% (topo03, 05, 08)
- 低: 2.0% (topo02, 04, 07, 10, 12)
- 中: 3.0% (topo01, 06, 11)
- 高: 5.0% (topo09)

**优势**: 丢包率覆盖0.1-5%，涵盖优秀到较差的网络条件

---

## 📈 与上一篇NTRU论文对比

### 参数范围对比

| 参数 | 上一篇NTRU (STK) | 本次PQ-NTOR (物理模型) | 对比 |
|------|-----------------|---------------------|------|
| 速率范围 | 可能10-100 Mbps | 0.30-27.52 Mbps | 更聚焦低速SAGIN |
| 延迟范围 | 未知 | 2.75-5.50 ms | 真实传播延迟 |
| 丢包范围 | 可能0-5% | 0.10-5.00% | 范围类似 |
| 参数来源 | STK仿真 | 物理层计算 | 方法不同但都真实 |

### 实验可比性

✅ **相同点**:
- 都基于真实物理模型（STK vs 师妹的Python模型）
- 都测试密钥交换协议在SAGIN场景的性能
- 都绘制握手时间 vs (速率、丢包) 曲线

✅ **优势**:
- 我们的参数范围更贴近实际SAGIN网络（低速率、高延迟）
- 12个拓扑提供更丰富的测试点
- 物理模型可复现、可调整

---

## ⚠️ 需要注意的拓扑

### topo09: 极低速率警告
- **速率**: 0.30 Mbps
- **SINR**: -9.59 dB
- **问题**: D2D链路距离过远 (2.8km)
- **影响**: PQ-NTOR握手可能超时或失败

**处理方案**:
1. **方案A**: 保留作为"极限场景"测试
2. **方案B**: 调整节点位置，缩短D2D距离
3. **方案C**: 在论文中标注为"挑战场景"

### topo06, topo11: 低速率拓扑
- **速率**: 1.82 Mbps
- **特征**: 包含长距离D2D链路
- **建议**: 测试时增加超时时间

---

## 🛠️ 下一步工作

### 1. 调整节点位置（可选）

**目标**: 让所有拓扑速率 > 1 Mbps

**需要调整的拓扑**:
- **topo06**: 缩短user_source到user_relay的距离（从1.4km到500m）
- **topo09**: 缩短user_helper到user_target的距离（从2.8km到1km）
- **topo11**: 缩短user_relay到user_final的距离（从1.4km到500m）

### 2. 运行PQ-NTOR测试

**测试脚本流程**:
```python
for topo_id in ['topo01', 'topo02', ..., 'topo12']:
    # 1. 加载参数
    params = load_params(topo_id)

    # 2. 应用TC
    apply_tc(params['rate_mbps'], params['delay_ms'], params['loss_percent'])

    # 3. 运行PQ-NTOR (10次)
    handshake_times = []
    for run in range(10):
        time_ms = run_pq_ntor_handshake()
        handshake_times.append(time_ms)

    # 4. 记录结果
    save_result(topo_id, params, handshake_times)

    # 5. 清理TC
    clear_tc()
```

### 3. 数据分析与绘图

**图1**: 握手时间 vs 通信速率
- X轴: 12个拓扑的速率值
- Y轴: 平均握手时间 (ms)
- 误差棒: 标准差

**图2**: 握手时间 vs 丢包率
- X轴: 12个拓扑的丢包率
- Y轴: 平均握手时间 (ms)

---

## ✅ 完成的工作总结

1. ✅ **定义12拓扑的3D节点坐标**
   - 基于SAGIN网络合理性原则
   - 覆盖上行、下行、多跳、协作等场景

2. ✅ **使用师妹的物理模型计算参数**
   - 卫星链路 (20 GHz)
   - UAV链路 (2.4 GHz)
   - D2D链路 (2.4 GHz)

3. ✅ **生成配置文件**
   - `topology_params.json`: 完整参数
   - `topology_tc_params.json`: TC应用参数
   - `topology_params_distribution.png`: 参数分布图

4. ✅ **参数验证**
   - 速率范围: 0.30 - 27.52 Mbps ✓
   - 延迟范围: 2.75 - 5.50 ms ✓
   - 丢包范围: 0.10 - 5.00 % ✓

---

## 📝 结论

通过师妹提供的物理层模型，我们成功计算了12个SAGIN NOMA拓扑的真实网络参数。这些参数：

1. ✅ **物理可信**: 基于无线通信理论模型
2. ✅ **范围合理**: 覆盖SAGIN网络的典型条件
3. ✅ **可复现**: 完整的计算代码和节点坐标
4. ✅ **可应用**: 可直接用于Linux TC配置

下一步将使用这些参数运行PQ-NTOR测试，绘制性能曲线图，完成论文所需的实验数据。

---

**文档版本**: v1.0
**创建时间**: 2025-11-28
**状态**: ✅ 参数计算完成，准备实验
