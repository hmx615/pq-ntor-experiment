# ğŸš€ é£è…¾æ´¾éƒ¨ç½²å¿«é€Ÿå¼€å§‹

5åˆ†é’ŸéªŒè¯é£è…¾æ´¾ç¯å¢ƒæ˜¯å¦å°±ç»ªï¼

## ğŸ“¦ ç¬¬ä¸€æ­¥ï¼šä¼ è¾“æ–‡ä»¶

### æ–¹å¼1: ä½¿ç”¨ scpï¼ˆæ¨èï¼‰

```bash
# åœ¨WSLå¼€å‘æœºä¸Š
cd /home/ccc/pq-ntor-experiment
scp deployment.tar.gz pi@192.168.1.10:~/
```

### æ–¹å¼2: ä½¿ç”¨Uç›˜

```bash
# æ‹·è´ deployment.tar.gz åˆ°Uç›˜
cp deployment.tar.gz /mnt/usb/

# åœ¨é£è…¾æ´¾ä¸Šæ‹·è´
cp /media/usb/deployment.tar.gz ~/
```

## ğŸ“‚ ç¬¬äºŒæ­¥ï¼šè§£å‹æ–‡ä»¶

```bash
# SSHç™»å½•é£è…¾æ´¾
ssh pi@192.168.1.10

# è§£å‹
cd ~
tar xzf deployment.tar.gz
cd deployment/

# æŸ¥çœ‹æ–‡ä»¶
ls -la
```

åº”è¯¥çœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶ï¼š
- `check_env.sh` - ç¯å¢ƒæ£€æŸ¥è„šæœ¬
- `install_deps.sh` - è‡ªåŠ¨å®‰è£…liboqs
- `test_kyber_simple.c` - KyberéªŒè¯ç¨‹åº
- `Makefile` - ç¼–è¯‘é…ç½®
- `README.md` - è¯¦ç»†è¯´æ˜
- `QUICKSTART.md` - æœ¬æ–‡ä»¶

## âœ… ç¬¬ä¸‰æ­¥ï¼šæ£€æŸ¥ç¯å¢ƒ

```bash
chmod +x check_env.sh
./check_env.sh
```

### é¢„æœŸè¾“å‡ºï¼ˆå…¨éƒ¨âœ…ï¼‰ï¼š
```
======================================
  é£è…¾æ´¾ç¯å¢ƒæ£€æŸ¥
======================================

[1/8] æ£€æŸ¥CPUæ¶æ„...
      æ¶æ„: aarch64
      âœ… ARM64æ¶æ„æ­£ç¡®

[2/8] æ£€æŸ¥æ“ä½œç³»ç»Ÿ...
      OS: Ubuntu 22.04
      âœ… Linuxç³»ç»Ÿ

[3/8] æ£€æŸ¥GCCç¼–è¯‘å™¨...
      gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0
      âœ… GCCå·²å®‰è£…

[4/8] æ£€æŸ¥Make...
      GNU Make 4.3
      âœ… Makeå·²å®‰è£…

[5/8] æ£€æŸ¥CMake...
      cmake version 3.22.1
      âœ… CMakeå·²å®‰è£…

[6/8] æ£€æŸ¥OpenSSL...
      OpenSSL 3.0.2 15 Mar 2022
      âœ… OpenSSLå¼€å‘åº“å·²å®‰è£…

[7/8] æ£€æŸ¥Git...
      git version 2.34.1
      âœ… Gitå·²å®‰è£…

[8/8] æ£€æŸ¥ç£ç›˜ç©ºé—´...
      å¯ç”¨ç©ºé—´: 5.2G
      éœ€è¦ç©ºé—´: ~500MB
      âœ… ç£ç›˜ç©ºé—´æ£€æŸ¥å®Œæˆ

======================================
  âœ… ç¯å¢ƒæ£€æŸ¥é€šè¿‡ï¼
======================================
```

### å¦‚æœæœ‰âŒï¼šå®‰è£…ç¼ºå¤±ä¾èµ–

```bash
sudo apt-get update
sudo apt-get install -y build-essential cmake libssl-dev git
```

ç„¶åé‡æ–°è¿è¡Œ `./check_env.sh`

## ğŸ”¨ ç¬¬å››æ­¥ï¼šå®‰è£… liboqs

```bash
chmod +x install_deps.sh
./install_deps.sh
```

è¿™å°†è‡ªåŠ¨å®Œæˆï¼š
1. å…‹éš† liboqs æºç 
2. é’ˆå¯¹ ARM64 ç¼–è¯‘ï¼ˆä½¿ç”¨æ‰€æœ‰CPUæ ¸å¿ƒï¼‰
3. å®‰è£…åˆ° ~/oqs ç›®å½•

**é¢„è®¡æ—¶é—´**: 5-10åˆ†é’Ÿ

### é¢„æœŸè¾“å‡ºï¼ˆæœ€åå‡ è¡Œï¼‰ï¼š
```
======================================
  âœ… liboqs å®‰è£…æˆåŠŸï¼
======================================

å®‰è£…ä½ç½®:
  åº“æ–‡ä»¶: /home/pi/oqs/lib/liboqs.so
  å¤´æ–‡ä»¶: /home/pi/oqs/include/oqs/

ä¸‹ä¸€æ­¥:
  1. ç¼–è¯‘æµ‹è¯•ç¨‹åº: make
  2. è¿è¡ŒéªŒè¯: ./test_kyber_simple
```

## ğŸ§ª ç¬¬äº”æ­¥ï¼šè¿è¡Œ Kyber éªŒè¯ç¨‹åº

```bash
make
./test_kyber_simple
```

### ğŸ‰ æˆåŠŸæ ‡å¿—ï¼š

```
======================================
  é£è…¾æ´¾Kyber KEMéªŒè¯ç¨‹åº
======================================

[1/4] æ£€æŸ¥Kyber512ç®—æ³•...
      âœ… Kyber512å¯ç”¨

[2/4] åˆ›å»ºKEMå¯¹è±¡...
      âœ… KEMå¯¹è±¡åˆ›å»ºæˆåŠŸ
      å…¬é’¥å¤§å°: 800 bytes
      å¯†é’¥å¤§å°: 1632 bytes
      å¯†æ–‡å¤§å°: 768 bytes
      å…±äº«å¯†é’¥: 32 bytes

[3/4] ç”Ÿæˆå¯†é’¥å¯¹...
      âœ… å¯†é’¥å¯¹ç”ŸæˆæˆåŠŸ

[4/4] æµ‹è¯•å°è£…/è§£å°è£…...
      âœ… å°è£…æˆåŠŸ
      âœ… è§£å°è£…æˆåŠŸ
      âœ… å…±äº«å¯†é’¥åŒ¹é…

======================================
  âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
  é£è…¾æ´¾ç¯å¢ƒé…ç½®æˆåŠŸï¼
  å¯ä»¥å¼€å§‹ç¼–è¯‘å®Œæ•´PQ-Torä»£ç ï¼
======================================
```

**å¦‚æœçœ‹åˆ°è¿™ä¸ªè¾“å‡º = é£è…¾æ´¾ç¯å¢ƒ100%å°±ç»ªï¼**

## ğŸ¯ ç¬¬å…­æ­¥ï¼šéƒ¨ç½²å®Œæ•´ PQ-Tor ä»£ç 

ç¯å¢ƒéªŒè¯æˆåŠŸåï¼Œå°±å¯ä»¥éƒ¨ç½²å®Œæ•´ä»£ç äº†ï¼š

```bash
# ä¼ è¾“å®Œæ•´ä»£ç åˆ°é£è…¾æ´¾
cd ~
# ä½¿ç”¨ scp æˆ– git clone è·å–å®Œæ•´ä»£ç 

# è¿›å…¥é¡¹ç›®ç›®å½•
cd pq-ntor-experiment/c

# ä¿®æ”¹ Makefileï¼ˆå¦‚æœéœ€è¦ï¼‰
# å°† LIBOQS_DIR = $(HOME)/_oqs æ”¹ä¸º LIBOQS_DIR = $(HOME)/oqs

# ç¼–è¯‘æ‰€æœ‰ç¨‹åº
make all

# è¿è¡Œå•å…ƒæµ‹è¯•
./test_kyber
./test_crypto
./test_pq_ntor
./test_cell
./test_onion

# æ‰€æœ‰æµ‹è¯•åº”è¯¥è¾“å‡º: âœ… All tests passed!

# è¿è¡Œå®Œæ•´ç½‘ç»œæµ‹è¯•ï¼ˆå•æœº5è¿›ç¨‹ï¼‰
./test_network.sh
```

## ğŸ“Š æ£€æŸ¥æ¸…å•

åœ¨**æ¯ä¸ªé£è…¾æ´¾**ä¸Šå®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

- [ ] ä¼ è¾“ deployment.tar.gz åˆ°é£è…¾æ´¾
- [ ] è§£å‹æ–‡ä»¶
- [ ] è¿è¡Œ check_env.shï¼ˆå…¨éƒ¨âœ…ï¼‰
- [ ] è¿è¡Œ install_deps.shï¼ˆå®‰è£…liboqsï¼‰
- [ ] è¿è¡Œ test_kyber_simpleï¼ˆéªŒè¯æˆåŠŸï¼‰
- [ ] ä¼ è¾“å®Œæ•´PQ-Torä»£ç 
- [ ] ç¼–è¯‘å®Œæ•´é¡¹ç›®ï¼ˆmake allï¼‰
- [ ] è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•ï¼ˆå…¨éƒ¨é€šè¿‡ï¼‰
- [ ] ï¼ˆä»…æ´¾1ï¼‰è¿è¡Œ test_network.sh

## ğŸŒ 5èŠ‚ç‚¹åˆ†å¸ƒå¼éƒ¨ç½²

å…¨éƒ¨5ä¸ªæ´¾éªŒè¯é€šè¿‡åï¼Œå‚è€ƒ `é£è…¾æ´¾éƒ¨ç½²æŒ‡å—.md` çš„ Step 6 è¿›è¡Œåˆ†å¸ƒå¼éƒ¨ç½²ã€‚

### èŠ‚ç‚¹åˆ†é…ï¼š

| æ´¾ç¼–å· | IP | è§’è‰² | å¯åŠ¨å‘½ä»¤ |
|--------|------------|------|----------|
| æ´¾1 | 192.168.1.10 | Directory | `./directory` |
| æ´¾2 | 192.168.1.11 | Guard | `./relay -r guard -p 6001` |
| æ´¾3 | 192.168.1.12 | Middle | `./relay -r middle -p 6002` |
| æ´¾4 | 192.168.1.13 | Exit | `./relay -r exit -p 6003` |
| æ´¾5 | 192.168.1.14 | Client | `./client http://192.168.1.10:8000` |

## ğŸ› é‡åˆ°é—®é¢˜ï¼Ÿ

### Q: check_env.sh æŠ¥å‘Šç¼ºå°‘ä¾èµ–
**A**:
```bash
sudo apt-get update
sudo apt-get install -y build-essential cmake libssl-dev git
```

### Q: install_deps.sh ç¼–è¯‘å¤±è´¥
**A**: æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œå¯èƒ½æ˜¯ git clone å¤±è´¥ã€‚æ‰‹åŠ¨ä¸‹è½½ï¼š
```bash
cd ~/pq-tor-deps
wget https://github.com/open-quantum-safe/liboqs/archive/refs/tags/0.11.0.tar.gz
tar xzf 0.11.0.tar.gz
cd liboqs-0.11.0
# ç„¶åæŒ‰ç…§ install_deps.sh ä¸­çš„æ­¥éª¤æ‰‹åŠ¨ç¼–è¯‘
```

### Q: test_kyber_simple è¿è¡Œæ—¶æ‰¾ä¸åˆ° liboqs.so
**A**:
```bash
export LD_LIBRARY_PATH=$HOME/oqs/lib:$LD_LIBRARY_PATH
./test_kyber_simple
```

æˆ–è€…é‡æ–°ç¼–è¯‘ï¼ˆMakefile å·²åŒ…å« -rpathï¼‰

### Q: éœ€è¦åœ¨æ‰€æœ‰5ä¸ªæ´¾ä¸Šéƒ½è¿è¡Œè¿™äº›æ­¥éª¤å—ï¼Ÿ
**A**: æ˜¯çš„ï¼æ¯ä¸ªæ´¾éƒ½éœ€è¦å®Œæ•´çš„ç¯å¢ƒå’Œä»£ç ã€‚

## ğŸ“ éœ€è¦æ›´å¤šå¸®åŠ©ï¼Ÿ

æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ï¼š
- `README.md` - æœ¬ç›®å½•çš„è¯¦ç»†è¯´æ˜
- `../é£è…¾æ´¾éƒ¨ç½²æŒ‡å—.md` - å®Œæ•´éƒ¨ç½²æ–¹æ¡ˆ
- `../c/README.md` - PQ-Tor é¡¹ç›®ä¸»æ–‡æ¡£

---

**é¢„è®¡æ€»æ—¶é—´**: æ¯ä¸ªé£è…¾æ´¾ 20-30åˆ†é’Ÿ

**æˆåŠŸæ ‡å¿—**: test_kyber_simple å…¨éƒ¨æ˜¾ç¤º âœ…

**ä¸‹ä¸€æ­¥**: éƒ¨ç½²å®Œæ•´5èŠ‚ç‚¹PQ-Torç½‘ç»œ

---

**åˆ›å»ºæ—¶é—´**: 2025-11-06
**ç‰ˆæœ¬**: 1.0
**é€‚ç”¨å¹³å°**: é£è…¾æ´¾ ARM64
