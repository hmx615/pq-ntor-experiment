# å½“å‰é¡¹ç›®çŠ¶æ€æŠ¥å‘Š

**æ›´æ–°æ—¶é—´**: 2025-12-11 09:55 UTC+8
**çŠ¶æ€**: ğŸŸ¡ é…ç½®å·²ä¿®å¤ï¼Œç­‰å¾…è¿è¡Œå®éªŒ

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. é—®é¢˜è¯Šæ–­ âœ…
å‘ç°12æ‹“æ‰‘å®éªŒçš„TCé…ç½®ä½¿ç”¨äº†é”™è¯¯çš„æ—§å‚æ•°ï¼š
- **Topo01 (Uplink)**: TCé…ç½® delay=20ms, rate=35mbitï¼ˆé”™è¯¯ï¼‰
- **Topo07 (Downlink)**: TCé…ç½® delay=**25ms**, rate=**30mbit**ï¼ˆæ›´å·®ï¼ï¼‰
- **é—®é¢˜**: Downlinké…ç½®åè€Œæ¯”Uplinkæ›´å·®ï¼Œå¯¼è‡´å®éªŒç»“æœä¸­Downlink overheadé«˜äºUplink

### 2. æ•°æ®æ¸…ç† âœ…
- ç§»åŠ¨ 27ä¸ªé”™è¯¯çš„JSONç»“æœæ–‡ä»¶åˆ°å¤‡ä»½
- ç§»åŠ¨çº¦30ä¸ªåŸºäºé”™è¯¯æ•°æ®çš„å›¾è¡¨åˆ°å¤‡ä»½
- ç§»åŠ¨15ä¸ªæ—§å®éªŒæ–‡æ¡£åˆ°å¤‡ä»½
- å¤‡ä»½ä½ç½®: `backup/old_experiment_data_20251211/` (6.0MB)

### 3. é…ç½®ä¿®å¤ âœ…
- åˆ›å»ºæ–°è„šæœ¬: `regenerate_configs_with_correct_params.py`
- ä» `topology_params.json` è¯»å–æ­£ç¡®çš„ç½‘ç»œå‚æ•°
- éªŒè¯TCå‘½ä»¤ä¸aggregate_paramsä¸€è‡´
- æ·»åŠ ç¼ºå¤±çš„ `test_configuration` å’Œ `target_url` å­—æ®µ

### 4. é…ç½®éªŒè¯ âœ…
æ–°é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆTopo01 vs Topo07ï¼‰:

| Topo | Direction | **æ–°TCå‘½ä»¤** | **aggregate_params** | çŠ¶æ€ |
|------|-----------|--------------|---------------------|------|
| Topo01 | Uplink | delay=5.42ms, rate=59.27mbit, loss=3.00% | delay=5.42ms, bw=59.27Mbps, loss=3.0% | âœ… ä¸€è‡´ |
| Topo07 | Downlink | delay=5.42ms, rate=**69.43mbit**, loss=2.00% | delay=5.42ms, bw=**69.43Mbps**, loss=2.0% | âœ… ä¸€è‡´ |

**é‡è¦**: Downlinkç°åœ¨é…ç½®äº†æ›´å¥½çš„ç½‘ç»œæ¡ä»¶ï¼ˆå¸¦å®½æ›´é«˜ï¼Œä¸¢åŒ…æ›´ä½ï¼‰ï¼

---

## ğŸŸ¡ å½“å‰é—®é¢˜

### å®éªŒè„šæœ¬æ‰§è¡Œé—®é¢˜
å°è¯•è¿è¡Œ `run_pq_ntor_12topologies.py` æ—¶å‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š
- è„šæœ¬å¯åŠ¨åå¡ä½ï¼Œæ²¡æœ‰å®é™…è¾“å‡º
- åªæœ‰Python deprecationè­¦å‘Š
- å¯èƒ½æ˜¯è„šæœ¬æœ¬èº«çš„bugæˆ–ç¯å¢ƒé—®é¢˜

---

## ğŸ“‹ ä¸‹ä¸€æ­¥å»ºè®®

### æ–¹æ¡ˆA: è°ƒè¯•å®éªŒè„šæœ¬ï¼ˆæ¨èï¼‰
1. æ£€æŸ¥ `run_pq_ntor_12topologies.py` çš„ä»£ç 
2. æ‰¾å‡ºä¸ºä»€ä¹ˆè„šæœ¬å¡ä½ä¸è¿è¡Œ
3. ä¿®å¤åé‡æ–°è¿è¡Œå®éªŒ

### æ–¹æ¡ˆB: æ‰‹åŠ¨è¿è¡Œå•ä¸ªæ‹“æ‰‘æµ‹è¯•
ä½¿ç”¨æ—§çš„å®éªŒç»“æœä½œä¸ºå‚è€ƒï¼Œæ‰‹åŠ¨è¿è¡Œå•ä¸ªæ‹“æ‰‘ï¼š
```bash
cd /home/ccc/pq-ntor-experiment/sagin-experiments/docker/build_context/c
# é…ç½®TC
sudo tc qdisc del dev lo root
sudo tc qdisc add dev lo root netem delay 5.42ms 1.35ms rate 59.27mbit loss 3.00%

# å¯åŠ¨æœåŠ¡
./directory -p 5000 &
./relay -r guard -p 6001 &
./relay -r middle -p 6002 &
./relay -r exit -p 6003 &

# è¿è¡Œæµ‹è¯•
./client localhost 5000 10
```

### æ–¹æ¡ˆC: ä½¿ç”¨ä¹‹å‰æˆåŠŸçš„è„šæœ¬
æ£€æŸ¥æ˜¯å¦æœ‰ä¹‹å‰æˆåŠŸè¿è¡Œè¿‡çš„å®éªŒè„šæœ¬ç‰ˆæœ¬ã€‚

---

## ğŸ“Š é¢„æœŸç»“æœ

ä¿®å¤åçš„å®éªŒåº”è¯¥æ˜¾ç¤ºï¼š
- **Downlink overhead < Uplink overhead**ï¼ˆå› ä¸ºä¸‹è¡Œè´¨é‡æ›´å¥½ï¼‰
- CBT (Circuit Build Time):
  - Downlink: æ›´çŸ­ï¼ˆå¸¦å®½æ›´é«˜ï¼Œä¸¢åŒ…æ›´ä½ï¼‰
  - Uplink: æ›´é•¿ï¼ˆå¸¦å®½è¾ƒä½ï¼Œä¸¢åŒ…è¾ƒé«˜ï¼‰

---

## ğŸ“ å…³é”®æ–‡ä»¶ä½ç½®

### é…ç½®æ–‡ä»¶
- `sagin-experiments/pq-ntor-12topo-experiment/configs/topo*.json` - 12ä¸ªæ–°é…ç½®æ–‡ä»¶
- `last_experiment/topology_params.json` - æ­£ç¡®çš„ç½‘ç»œå‚æ•°æº

### è„šæœ¬
- `regenerate_configs_with_correct_params.py` - é…ç½®ç”Ÿæˆè„šæœ¬ï¼ˆå·²ä¿®å¤ï¼‰
- `run_pq_ntor_12topologies.py` - å®éªŒè¿è¡Œè„šæœ¬ï¼ˆ**æœ‰é—®é¢˜**ï¼‰

### å¤‡ä»½
- `backup/old_experiment_data_20251211/` - æ—§æ•°æ®å¤‡ä»½ï¼ˆä¸è¦ä½¿ç”¨ï¼‰
- `CLEANUP_SUMMARY.md` - æ¸…ç†æ€»ç»“

---

## âš ï¸ é‡è¦æé†’

1. âŒ **ä¸è¦ä½¿ç”¨** `backup/old_experiment_data_20251211/` ä¸­çš„æ•°æ®
2. âœ… æ‰€æœ‰æ–°é…ç½®æ–‡ä»¶å·²éªŒè¯æ­£ç¡®
3. ğŸ”§ éœ€è¦è§£å†³å®éªŒè„šæœ¬çš„æ‰§è¡Œé—®é¢˜æ‰èƒ½ç»§ç»­

---

**ç”Ÿæˆæ—¶é—´**: 2025-12-11 09:55 UTC+8
