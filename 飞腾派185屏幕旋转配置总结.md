# é£è…¾æ´¾ 192.168.5.185 å±å¹•æ—‹è½¬180åº¦é…ç½®æ€»ç»“

**é…ç½®æ—¶é—´**: 2025-12-02
**ç›®æ ‡è®¾å¤‡**: 192.168.5.185
**è´¦å·**: user / user
**é…ç½®çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## ğŸ“‹ å·²å®Œæˆçš„é…ç½®

### 1. X11å›¾å½¢ç•Œé¢æ—‹è½¬ âœ…

**æ£€æµ‹åˆ°çš„æ˜¾ç¤ºè¾“å‡º**: `DP-1`

**å·²æ‰§è¡Œçš„å‘½ä»¤**:
```bash
DISPLAY=:0 xrandr --output DP-1 --rotate inverted
```

**æ•ˆæœ**: å›¾å½¢ç•Œé¢å·²180åº¦æ—‹è½¬ï¼ˆå€’ç½®æ˜¾ç¤ºï¼‰

---

### 2. è‡ªåŠ¨å¯åŠ¨é…ç½® âœ…

**åˆ›å»ºäº†æ¡Œé¢è‡ªåŠ¨å¯åŠ¨æ–‡ä»¶**: `~/.config/autostart/rotate-screen.desktop`

**å†…å®¹**:
```ini
[Desktop Entry]
Type=Application
Name=Rotate Screen
Exec=sh -c 'export DISPLAY=:0; xrandr --output DP-1 --rotate inverted'
Hidden=false
NoDisplay=false
X-GNOME-Autostart-enabled=true
```

**æ•ˆæœ**: ç³»ç»Ÿé‡å¯åä¼šè‡ªåŠ¨æ—‹è½¬å±å¹•

---

### 3. SystemdæœåŠ¡é…ç½® âœ…

**åˆ›å»ºäº†ç³»ç»ŸæœåŠ¡**: `/etc/systemd/system/rotate-screen.service`

**æœåŠ¡å†…å®¹**:
```ini
[Unit]
Description=Rotate Screen 180 degrees
After=multi-user.target

[Service]
Type=oneshot
ExecStart=/bin/sh -c "echo 2 > /sys/class/graphics/fbcon/rotate"
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
```

**æœåŠ¡çŠ¶æ€**:
- âœ… å·²å¯ç”¨ (`systemctl enable rotate-screen.service`)
- âœ… å·²å¯åŠ¨ (`systemctl start rotate-screen.service`)

**æ•ˆæœ**: å¼€æœºè‡ªåŠ¨è®¾ç½®framebufferæ—‹è½¬

---

### 4. Framebufferæ—‹è½¬ âœ…

**å·²å°è¯•è®¾ç½®**: `/sys/class/graphics/fbcon/rotate` = 2

**è¯´æ˜**:
- `0` = æ­£å¸¸ï¼ˆ0åº¦ï¼‰
- `1` = é¡ºæ—¶é’ˆ90åº¦
- `2` = 180åº¦ï¼ˆå€’ç½®ï¼‰
- `3` = é€†æ—¶é’ˆ90åº¦

**æ³¨æ„**: framebufferæ—‹è½¬å¯èƒ½éœ€è¦é‡å¯æ‰èƒ½å®Œå…¨ç”Ÿæ•ˆ

---

## ğŸ¯ å½“å‰çŠ¶æ€

### å·²ç”Ÿæ•ˆ âœ…
- **X11å›¾å½¢ç•Œé¢**: å·²æ—‹è½¬180åº¦ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰
- **å¼€æœºè‡ªåŠ¨æ—‹è½¬**: é…ç½®å·²å¯ç”¨

### éœ€é‡å¯åç”Ÿæ•ˆ ğŸ”„
- **Framebufferæ—‹è½¬**: éœ€è¦é‡å¯ç³»ç»Ÿæ‰èƒ½å®Œå…¨ç”Ÿæ•ˆ

---

## ğŸ”§ æ‰‹åŠ¨æ“ä½œæŒ‡å—

### å¦‚æœéœ€è¦æ‰‹åŠ¨æ£€æŸ¥é…ç½®

#### 1. æ£€æŸ¥X11æ—‹è½¬çŠ¶æ€
```bash
ssh user@192.168.5.185
export DISPLAY=:0
xrandr --query
```

æŸ¥çœ‹è¾“å‡ºä¸­ `DP-1` æ˜¯å¦æ˜¾ç¤º `inverted`

#### 2. æ£€æŸ¥systemdæœåŠ¡çŠ¶æ€
```bash
ssh user@192.168.5.185
systemctl status rotate-screen.service
```

#### 3. æ£€æŸ¥framebufferæ—‹è½¬å€¼
```bash
ssh user@192.168.5.185
cat /sys/class/graphics/fbcon/rotate
```

åº”è¯¥è¾“å‡º `2`ï¼ˆå¦‚æœé‡å¯åï¼‰

---

## ğŸ”„ é‡å¯åçš„æ•ˆæœ

**ä¸‹æ¬¡é‡å¯é£è…¾æ´¾æ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µ**:

1. âœ… SystemdæœåŠ¡ä¼šè®¾ç½®framebufferæ—‹è½¬å€¼ä¸º2
2. âœ… æ¡Œé¢ç¯å¢ƒå¯åŠ¨åï¼Œè‡ªåŠ¨å¯åŠ¨è„šæœ¬ä¼šæ‰§è¡Œxrandræ—‹è½¬
3. âœ… å±å¹•æœ€ç»ˆæ˜¾ç¤ºä¸º180åº¦å€’ç½®

**é¢„æœŸç»“æœ**: æ•´ä¸ªæ˜¾ç¤ºå†…å®¹ä¸Šä¸‹é¢ å€’

---

## â†©ï¸ å¦‚ä½•æ¢å¤æ­£å¸¸æ˜¾ç¤º

### æ–¹æ³•1: ä¸´æ—¶æ¢å¤ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰

```bash
ssh user@192.168.5.185
export DISPLAY=:0
xrandr --output DP-1 --rotate normal
```

### æ–¹æ³•2: æ°¸ä¹…æ¢å¤ï¼ˆéœ€è¦åˆ é™¤é…ç½®ï¼‰

```bash
ssh user@192.168.5.185

# 1. åˆ é™¤è‡ªåŠ¨å¯åŠ¨è„šæœ¬
rm ~/.config/autostart/rotate-screen.desktop

# 2. ç¦ç”¨å¹¶åˆ é™¤systemdæœåŠ¡
sudo systemctl stop rotate-screen.service
sudo systemctl disable rotate-screen.service
sudo rm /etc/systemd/system/rotate-screen.service
sudo systemctl daemon-reload

# 3. é‡ç½®framebufferæ—‹è½¬
echo 0 | sudo tee /sys/class/graphics/fbcon/rotate

# 4. é‡ç½®X11æ—‹è½¬
export DISPLAY=:0
xrandr --output DP-1 --rotate normal
```

---

## ğŸ“ æŠ€æœ¯åŸç†

### ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ä¸¤ä¸ªåœ°æ–¹ï¼Ÿ

1. **X11å›¾å½¢ç•Œé¢** (`xrandr`)
   - æ§åˆ¶æ¡Œé¢ç¯å¢ƒçš„æ˜¾ç¤ºæ–¹å‘
   - å›¾å½¢åŒ–åº”ç”¨ç¨‹åºçš„æ˜¾ç¤º
   - éœ€è¦X Serverè¿è¡Œ

2. **Framebuffer** (`/sys/class/graphics/fbcon/rotate`)
   - æ§åˆ¶Linuxæ§åˆ¶å°ï¼ˆTTYï¼‰çš„æ˜¾ç¤ºæ–¹å‘
   - å¯åŠ¨ç”»é¢ã€ç™»å½•ç•Œé¢
   - ä¸ä¾èµ–X Server

**ä¸ºäº†è¦†ç›–æ‰€æœ‰æ˜¾ç¤ºåœºæ™¯ï¼Œéœ€è¦åŒæ—¶é…ç½®ä¸¤è€…**

---

## ğŸ› ï¸ ä½¿ç”¨çš„å·¥å…·

### è„šæœ¬æ–‡ä»¶
- **ä½ç½®**: `/home/ccc/pq-ntor-experiment/rotate_screen_185.py`
- **è¯­è¨€**: Python 3
- **ä¾èµ–**: paramikoåº“ï¼ˆSSHè¿æ¥ï¼‰

### æ‰§è¡Œæ–¹å¼
```bash
cd /home/ccc/pq-ntor-experiment
python3 rotate_screen_185.py
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1: å›¾å½¢ç•Œé¢æ²¡æœ‰æ—‹è½¬

**æ£€æŸ¥å‘½ä»¤**:
```bash
export DISPLAY=:0
xrandr --query | grep -A 1 DP-1
```

**æ‰‹åŠ¨æ—‹è½¬**:
```bash
export DISPLAY=:0
xrandr --output DP-1 --rotate inverted
```

### é—®é¢˜2: æ§åˆ¶å°æ²¡æœ‰æ—‹è½¬

**æ£€æŸ¥å‘½ä»¤**:
```bash
cat /sys/class/graphics/fbcon/rotate
```

**æ‰‹åŠ¨æ—‹è½¬**:
```bash
echo 2 | sudo tee /sys/class/graphics/fbcon/rotate
```

### é—®é¢˜3: é‡å¯åæ²¡æœ‰è‡ªåŠ¨æ—‹è½¬

**æ£€æŸ¥æœåŠ¡çŠ¶æ€**:
```bash
systemctl status rotate-screen.service
```

**æŸ¥çœ‹æœåŠ¡æ—¥å¿—**:
```bash
journalctl -u rotate-screen.service
```

---

## âš ï¸ é‡è¦æç¤º

1. **ä¸è¦ç°åœ¨é‡å¯**: å› ä¸ºé£è…¾æ´¾ä¸Šè¿˜æœ‰å…¶ä»–é¡¹ç›®åœ¨è¿è¡Œ
2. **é…ç½®å·²ä¿å­˜**: æ‰€æœ‰é…ç½®éƒ½å·²æŒä¹…åŒ–ï¼Œé‡å¯åä¼šè‡ªåŠ¨ç”Ÿæ•ˆ
3. **å¯ä»¥æµ‹è¯•**: X11å›¾å½¢ç•Œé¢çš„æ—‹è½¬å·²ç»ç«‹å³ç”Ÿæ•ˆï¼Œå¯ä»¥æŸ¥çœ‹
4. **å¯ä»¥æ¢å¤**: ä½¿ç”¨ä¸Šé¢çš„"æ¢å¤æ­£å¸¸æ˜¾ç¤º"æ–¹æ³•å¯ä»¥éšæ—¶æ¢å¤

---

## ğŸ“ è”ç³»ä¸æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. æ£€æŸ¥æœ¬æ–‡æ¡£çš„"æ•…éšœæ’æŸ¥"éƒ¨åˆ†
2. æŸ¥çœ‹ `/tmp/hub.log` ç­‰æ—¥å¿—æ–‡ä»¶
3. ä½¿ç”¨SSHæ‰‹åŠ¨æ£€æŸ¥é…ç½®çŠ¶æ€

---

**é…ç½®å®Œæˆæ—¶é—´**: 2025-12-02
**é…ç½®å·¥å…·**: Python + paramiko
**é…ç½®çŠ¶æ€**: âœ… æˆåŠŸï¼ˆç­‰å¾…é‡å¯éªŒè¯ï¼‰
