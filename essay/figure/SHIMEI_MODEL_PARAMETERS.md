# 师妹NOMA物理层模型参数文档

本文档记录师妹论文中使用的SAGIN网络物理层仿真模型的所有参数。

---

## 1. 卫星链路模型 (test_satellite_noma.py)

### 1.1 基础物理常数

| 参数 | 符号 | 值 | 说明 |
|------|------|-----|------|
| 光速 | C | 3×10⁸ m/s | 电磁波传播速度 |
| 载波频率 | FREQ | **20 GHz** | Ku/Ka波段 |
| 噪声功率谱密度 | N₀ | -174 dBm/Hz | 热噪声 |

### 1.2 天线增益参数

| 参数 | 值 (dBi) | 线性值 | 说明 |
|------|---------|--------|------|
| 卫星发射增益 G_SAT_TX | **32 dBi** | 1585 | 卫星下行发射天线 |
| 地面用户接收增益 G_USER_RX | **5 dBi** | 3.16 | 地面终端接收天线 |
| UAV接收增益 G_UAV_RX | **25 dBi** | 316 | UAV平台接收天线 |
| UAV上行发射增益 G_UAV_TX_UL | **15 dBi** | 31.62 | UAV上行发射天线 |
| 地面上行发射增益 G_GROUND_TX_UL | **10 dBi** | 10 | 地面终端上行天线 |
| 卫星接收增益 RX_GAIN_SAT | **32 dBi** | 1585 | 卫星上行接收天线 |

### 1.3 波束模型参数

| 参数 | 值 | 说明 |
|------|-----|------|
| 波束角 BEAM_ANGLE_B | **0.85°** | 3dB波束宽度 |
| 波束系数 BEAM_UK_N_COEFF | **2.07123** | Bessel函数系数 |

波束增益公式采用Bessel函数模型：
```
G_beam = [J₁(u)/2u + 36·J₃(u)/u³]²
其中: u = 2.07123 × sin(φ) / sin(0.85°)
```

### 1.4 仿真中使用的功率值

| 场景 | 发射功率 | 带宽 |
|------|---------|------|
| 卫星下行 (main函数示例) | 20 W (43 dBm) | 20 MHz |
| 地面上行 (main函数示例) | 0.2 W (23 dBm) | 20 MHz |
| UAV上行 (main函数示例) | 3 W (35 dBm) | 20 MHz |
| NOMA功率分配系数 α | 0.7 | 弱用户70%，强用户30% |

### 1.5 卫星位置示例

时间槽15的卫星坐标：
- X: -118,056.04 m
- Y: 14,085.41 m
- Z: **813,291.98 m** (约813 km高度，LEO轨道)

---

## 2. UAV链路模型 (test_uav_noma.py)

### 2.1 基础参数

| 参数 | 符号 | 值 | 说明 |
|------|------|-----|------|
| 光速 | C | 3×10⁸ m/s | |
| 载波频率 | FREQ_UAV | **2.4 GHz** | WiFi/LTE频段 |
| 噪声功率谱密度 | N₀ | -174 dBm/Hz | |

### 2.2 空对地信道模型参数

采用**概率LoS/NLoS模型**：

| 参数 | 值 | 说明 |
|------|-----|------|
| A_SUB | **4.88** | LoS概率参数a |
| B_SUB | **0.43** | LoS概率参数b |
| η_LOS | **1.0 dB** | LoS额外衰减 |
| η_NLOS | **21.0 dB** | NLoS额外衰减 |

LoS概率公式：
```
P_LoS = 1 / (1 + A·exp(-B·(θ - A)))
其中: θ = arctan(高度/水平距离) [度]
```

路径损耗公式：
```
PL(dB) = FSPL(dB) + P_LoS·η_LOS + (1-P_LoS)·η_NLOS
```

### 2.3 仿真中使用的值

| 场景 | 值 |
|------|-----|
| UAV高度 | **1000 m** (1 km) |
| UAV发射功率 | **3.16 W** (35 dBm) |
| 带宽 | **2 MHz** |
| NOMA功率分配系数 α | 0.7 |

---

## 3. D2D链路模型 (test_d2d_noma.py)

### 3.1 基础参数

| 参数 | 符号 | 值 | 说明 |
|------|------|-----|------|
| 光速 | C | 3×10⁸ m/s | |
| 载波频率 | FREQ_D2D | **2.4 GHz** | WiFi/LTE频段 |
| 噪声功率谱密度 | N₀ | -174 dBm/Hz | |

### 3.2 路径损耗模型

采用**幂律路径损耗模型**：

| 参数 | 值 | 说明 |
|------|-----|------|
| 路径损耗指数 | **3.0** | 城市环境典型值 |
| 参考距离 | **1.0 m** | |

路径损耗公式：
```
PL(dB) = FSPL(d₀) + 10·n·log₁₀(d/d₀)
其中: n=3.0 (路径损耗指数)
```

### 3.3 仿真中使用的值

| 场景 | 值 |
|------|-----|
| D2D发射功率 | **0.2 W** (23 dBm) |
| 带宽 | **2 MHz** |
| 典型距离 | 30-100 m |
| NOMA功率分配系数 α | 0.7 |

---

## 4. 我们实验中使用的参数 (calculate_topology_params.py)

我们基于师妹的模型，针对12拓扑实验调整了部分参数：

### 4.1 功率设置

| 链路类型 | 师妹原始值 | 我们使用的值 | 调整原因 |
|---------|-----------|-------------|---------|
| 卫星下行 | 20 W | **22 W** | 确保下行速率略高于上行 |
| UAV上行到卫星 | 3 W | **5 W** | 提升UAV上行链路质量 |
| 地面上行到卫星 | 0.2 W | **1 W** | 提升地面上行链路质量 |
| UAV下行 | 3.16 W | **5 W** | 统一UAV功率 |
| 地面上行到UAV | - | **1 W** | 新增场景 |
| D2D链路 | 0.2 W | **1 W** | 提升D2D链路质量 |

### 4.2 带宽设置

| 链路类型 | 师妹原始值 | 我们使用的值 |
|---------|-----------|-------------|
| 卫星链路 | 20 MHz | **20 MHz** (保持不变) |
| UAV链路 | 2 MHz | **2 MHz** (保持不变) |
| D2D链路 | 2 MHz | **2 MHz** (保持不变) |

---

## 5. 速率计算公式

所有链路采用**香农公式**计算速率：

```
R = B × log₂(1 + SINR)  [bps]
```

其中：
- B: 带宽 (Hz)
- SINR: 信噪比（线性值）

SINR计算：
```
SINR = (P_tx × G_total) / (N₀ × B)
```

---

## 6. 参数合理性对照

| 参数 | 师妹模型值 | 实际工程值 | 差异说明 |
|------|-----------|-----------|---------|
| 卫星频率 | 20 GHz | 12-30 GHz (Ku/Ka) | 合理 |
| 卫星高度 | ~813 km | 500-2000 km (LEO) | 合理 |
| 卫星发射增益 | 32 dBi | 4-40 dBi | 偏高端 |
| 用户接收增益 | 5 dBi | 10-20 dBi | 偏保守 |
| UAV频率 | 2.4 GHz | 2.4-5.8 GHz | 合理 |
| UAV高度 | 1 km | 0.1-3 km | 合理 |
| LoS模型参数 | a=4.88, b=0.43 | 文献典型值 | 合理 (城市环境) |
| D2D路径损耗指数 | 3.0 | 2.5-4.0 | 合理 (城市环境) |

---

## 7. 参考文献

师妹模型中的关键参数来源：

1. **卫星波束模型**: 基于Bessel函数的波束增益模型，常见于卫星通信文献
2. **空对地LoS概率模型**: 参考ITU-R P.1411建议书或3GPP TR 36.777
3. **D2D路径损耗模型**: 标准幂律模型，路径损耗指数3.0对应城市NLOS环境

---

*文档生成时间: 2025-12-16*
*源文件位置: /home/ccc/pq-ntor-experiment/last_experiment/*
